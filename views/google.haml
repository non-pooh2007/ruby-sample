!!! XML
!!!
%html
  %head
    %meta{ 'name' => "viewport", :content => "width=device-width, user-scalable=yes"}
    %meta{ 'charset' => "utf-8"}
    %style *{ margin:0; padding:0; }
    %script{ :type => "text/javascript",
    	     :src => "http://maps.google.com/maps/api/js?sensor=true" }
  %body
    %div#map
    %script{ :type => "text/javascript" }
      fGetLocation = 0;
      prevLat = 0; prevLng = 0;
      $("map").style.width = document.width + "px";
      $("map").style.height = document.height + "px";
      navigator.geolocation.getCurrentPosition( notifyPos );
      function notifyPos(pos){ 
      var lat = pos.coords.latitude;
      var lng = pos.coords.longitude;
      var mypos = new google.maps.LatLng(lat, lng);
      var option = { zoom:16, center:mypos,
      mapTypeId:google.maps.MapTypeId.ROADMAP };
      if ( fGetLocation == 0 ) {
      gmap = new google.maps.Map($("map"), option);
      gmarker = new google.maps.Marker({ position:mypos, map:gmap });
      fGetLocation = 1;
      } else {
      gmap.panTo( mypos );
      gmarker.setPosition( mypos );
      } // 
      }
      function $(id){ return document.getElementById(id); }

